DROP TABLE IF EXISTS jdbc_customer;
CREATE TABLE jdbc_customer ( customer_id INT generated BY DEFAULT AS IDENTITY PRIMARY key, full_name VARCHAR(50), email VARCHAR(50) NOT NULL UNIQUE, birth_date DATE, gender VARCHAR(50) );
INSERT INTO
  jdbc_customer (full_name, email, birth_date, gender) 
VALUES
  (
    'Maggee Donald', 'mdonald0@marriott.com', '1987-06-13', 'F' 
  )
;
INSERT INTO
  jdbc_customer (full_name, email, birth_date, gender) 
VALUES
  (
    'Arni Sturch', 'asturch1@bbb.org', '1981-05-02', 'F' 
  )
;
INSERT INTO
  jdbc_customer (full_name, email, birth_date, gender) 
VALUES
  (
    'Abbot Angel', 'aangel2@ihg.com', '1984-12-23', 'M' 
  )
;
INSERT INTO
  jdbc_customer (full_name, email, birth_date, gender) 
VALUES
  (
    'Georgeta Drackford', 'gdrackford3@nature.com', '1993-11-02', 'F' 
  )
;
INSERT INTO
  jdbc_customer (full_name, email, birth_date, gender) 
VALUES
  (
    'Marin Pollendine', 'mpollendine4@reddit.com', '1999-10-21', 'F' 
  )
;
INSERT INTO
  jdbc_customer (full_name, email, birth_date, gender) 
VALUES
  (
    'Lloyd Garber', 'lgarber5@wsj.com', '1991-08-28', 'M' 
  )
;
INSERT INTO
  jdbc_customer (full_name, email, birth_date, gender) 
VALUES
  (
    'Savina Manwaring', 'smanwaring6@sfgate.com', '1996-01-03', 'F' 
  )
;
INSERT INTO
  jdbc_customer (full_name, email, birth_date, gender) 
VALUES
  (
    'Daniel Hansard', 'dhansard7@rediff.com', '1986-09-18', 'M' 
  )
;
INSERT INTO
  jdbc_customer (full_name, email, birth_date, gender) 
VALUES
  (
    'Patricia Titherington', 'ptitherington8@ehow.com', '1994-07-12', 'F' 
  )
;
INSERT INTO
  jdbc_customer (full_name, email, birth_date, gender) 
VALUES
  (
    'Meta Boleyn', 'mboleyn9@ox.ac.uk', '1982-05-20', 'F' 
  )
;
---
DROP TABLE IF EXISTS jdbc_merchant;
CREATE TABLE jdbc_merchant ( merchant_id INT generated BY DEFAULT AS IDENTITY PRIMARY key, merchant_name VARCHAR(50), email VARCHAR(50), description text );
INSERT INTO
  jdbc_merchant (merchant_name, email, description) 
VALUES
  (
    'Heathcote Inc', 'rgilkes0@e-recht24.de', 'Maecenas tristique, est et tempus semper, est quam pharetra magna, ac consequat metus sapien ut nunc. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Mauris viverra diam vitae quam. Suspendisse potenti.' 
  )
;
INSERT INTO
  jdbc_merchant (merchant_name, email, description) 
VALUES
  (
    'Volkman, Roberts and Dietrich', 'ebenstead1@auda.org.au', 'Nullam porttitor lacus at turpis. Donec posuere metus vitae ipsum. Aliquam non mauris.' 
  )
;
INSERT INTO
  jdbc_merchant (merchant_name, email, description) 
VALUES
  (
    'Moore LLC', 'mtillman2@house.gov', NULL 
  )
;
INSERT INTO
  jdbc_merchant (merchant_name, email, description) 
VALUES
  (
    'Purdy and Sons', 'jhambelton3@wikipedia.org', NULL 
  )
;
INSERT INTO
  jdbc_merchant (merchant_name, email, description) 
VALUES
  (
    'Kuhic-Parisian', 'dmccreery4@wix.com', 'Curabitur at ipsum ac tellus semper interdum. Mauris ullamcorper purus sit amet nulla. Quisque arcu libero, rutrum ac, lobortis vel, dapibus at, diam.' 
  )
;
INSERT INTO
  jdbc_merchant (merchant_name, email, description) 
VALUES
  (
    'Greenfelder-Emard', 'eclara5@webeden.co.uk', 'Duis aliquam convallis nunc. Proin at turpis a pede posuere nonummy. Integer non velit.' 
  )
;
INSERT INTO
  jdbc_merchant (merchant_name, email, description) 
VALUES
  (
    'Armstrong and Sons', 'mhartle6@phoca.cz', NULL 
  )
;
INSERT INTO
  jdbc_merchant (merchant_name, email, description) 
VALUES
  (
    'Goyette-Pollich', 'vblowin7@jiathis.com', 'In quis justo. Maecenas rhoncus aliquam lacus. Morbi quis tortor id nulla ultrices aliquet.' 
  )
;
INSERT INTO
  jdbc_merchant (merchant_name, email, description) 
VALUES
  (
    'Yundt Group', 'larnli8@pen.io', 'Morbi porttitor lorem id ligula. Suspendisse ornare consequat lectus. In est risus, auctor sed, tristique in, tempus sit amet, sem.' 
  )
;
INSERT INTO
  jdbc_merchant (merchant_name, email, description) 
VALUES
  (
    'Wintheiser-Cummerata', 'cbartzen9@archive.org', NULL 
  )
;
---
CREATE OR REPLACE PROCEDURE public.update_jdbc_customer(
	existing_customer_id bigint,
	new_full_name character varying)
LANGUAGE 'plpgsql'
AS $BODY$
declare
    dynamic_sql varchar(1000);
begin
    dynamic_sql = 'update jdbc_customer set full_name = ''' || new_full_name 
	              || ''' where customer_id = ' || existing_customer_id;
	
    execute dynamic_sql;
end
$BODY$;

DROP TABLE IF EXISTS jpa_customer;
CREATE TABLE jpa_customer ( customer_id INT generated BY DEFAULT AS IDENTITY PRIMARY key, full_name VARCHAR(50), email VARCHAR(50) NOT NULL UNIQUE, birth_date DATE, gender VARCHAR(50) );
INSERT INTO
  jpa_customer (full_name, email, birth_date, gender) 
VALUES
  (
    'Maggee Donald', 'mdonald0@marriott.com', '1987-06-13', 'F' 
  )
;
INSERT INTO
  jpa_customer (full_name, email, birth_date, gender) 
VALUES
  (
    'Arni Sturch', 'asturch1@bbb.org', '1981-05-02', 'F' 
  )
;
INSERT INTO
  jpa_customer (full_name, email, birth_date, gender) 
VALUES
  (
    'Abbot Angel', 'aangel2@ihg.com', '1984-12-23', 'M' 
  )
;
INSERT INTO
  jpa_customer (full_name, email, birth_date, gender) 
VALUES
  (
    'Georgeta Drackford', 'gdrackford3@nature.com', '1993-11-02', 'F' 
  )
;
INSERT INTO
  jpa_customer (full_name, email, birth_date, gender) 
VALUES
  (
    'Marin Pollendine', 'mpollendine4@reddit.com', '1999-10-21', 'F' 
  )
;
INSERT INTO
  jpa_customer (full_name, email, birth_date, gender) 
VALUES
  (
    'Lloyd Garber', 'lgarber5@wsj.com', '1991-08-28', 'M' 
  )
;
INSERT INTO
  jpa_customer (full_name, email, birth_date, gender) 
VALUES
  (
    'Savina Manwaring', 'smanwaring6@sfgate.com', '1996-01-03', 'F' 
  )
;
INSERT INTO
  jpa_customer (full_name, email, birth_date, gender) 
VALUES
  (
    'Daniel Hansard', 'dhansard7@rediff.com', '1986-09-18', 'M' 
  )
;
INSERT INTO
  jpa_customer (full_name, email, birth_date, gender) 
VALUES
  (
    'Patricia Titherington', 'ptitherington8@ehow.com', '1994-07-12', 'F' 
  )
;
INSERT INTO
  jpa_customer (full_name, email, birth_date, gender) 
VALUES
  (
    'Meta Boleyn', 'mboleyn9@ox.ac.uk', '1982-05-20', 'F' 
  )
;
DROP TABLE IF EXISTS xss_article CASCADE;
CREATE TABLE xss_article ( article_id INT generated BY DEFAULT AS IDENTITY PRIMARY key, article text NOT NULL );
DROP TABLE IF EXISTS basic_auth_user;
CREATE TABLE basic_auth_user ( user_id INT generated BY DEFAULT AS IDENTITY PRIMARY key, username VARCHAR(150) NOT NULL UNIQUE, password_hash VARCHAR(100) NOT NULL, salt VARCHAR(16) NOT NULL UNIQUE, display_name VARCHAR(50) );
INSERT INTO
  basic_auth_user (user_id, username, password_hash, salt, display_name) 
VALUES
  (
    9999, 'b47ae31867bf002df6ffde0a5e1f8bd4c7c371608121cc5edcaf52986d52e8e8', '$2y$05$b03MQkjNRzjLKyu3R0PEaOW39lOQrrCF5Z1MkM78h6U4ysXQOqpe.', 'wnNJiOOYM3L9OdFq', 'Administrator'
  )
;
INSERT INTO
  basic_auth_user (user_id, username, password_hash, salt, display_name) 
VALUES
  (
    9998, 'f9c34cef4027cd1e547a9ea5a27152e3f24ab18f78baa6e036b67cc43bb44f26', '$2y$05$RjfNaknMQ1DuRTL1UTfOSOxt9Yze.itnnYY6sbKzSNvPodZ5VSQ96', 'NXOrjNKqpMSwYXPQ', 'Elsa of Arendelle'
  )
;
DROP TABLE IF EXISTS basic_acl_uri;
CREATE TABLE basic_acl_uri ( uri_id INTEGER NOT NULL generated BY DEFAULT AS IDENTITY PRIMARY key, METHOD VARCHAR(100) NOT NULL, uri VARCHAR(300) NOT NULL );
DROP TABLE IF EXISTS basic_acl_user_uri_ref;
CREATE TABLE basic_acl_user_uri_ref ( user_id INTEGER, uri_id INTEGER );
INSERT INTO
  basic_acl_uri (uri_id, METHOD, uri) 
VALUES
  (
    9981, 'GET', '/api/acl/v\d{1,3}/one'
  )
;
INSERT INTO
  basic_acl_uri (uri_id, METHOD, uri) 
VALUES
  (
    9982, 'DELETE', '/api/acl/v\d{1,3}/one'
  )
;
INSERT INTO
  basic_acl_uri (uri_id, METHOD, uri) 
VALUES
  (
    9983, 'POST', '/api/acl/v\d{1,3}/anypath/.*'
  )
;
INSERT INTO
  basic_acl_uri (uri_id, METHOD, uri) 
VALUES
  (
    9984, 'GET', '/api/acl/v\d{1,3}/anypath/.*'
  )
;
INSERT INTO
  basic_acl_uri (uri_id, METHOD, uri) 
VALUES
  (
    9985, 'PUT', '/api/acl/v\d{1,3}/.*/three'
  )
;
INSERT INTO
  basic_acl_user_uri_ref (user_id, uri_id) 
VALUES
  (
    9999, 9982
  )
;
INSERT INTO
  basic_acl_user_uri_ref (user_id, uri_id) 
VALUES
  (
    9999, 9983
  )
;
INSERT INTO
  basic_acl_user_uri_ref (user_id, uri_id) 
VALUES
  (
    9999, 9984
  )
;
INSERT INTO
  basic_acl_user_uri_ref (user_id, uri_id) 
VALUES
  (
    9999, 9985
  )
;
INSERT INTO
  basic_acl_user_uri_ref (user_id, uri_id) 
VALUES
  (
    9998, 9981
  )
;
INSERT INTO
  basic_acl_user_uri_ref (user_id, uri_id) 
VALUES
  (
    9998, 9982
  )
;
INSERT INTO
  basic_acl_user_uri_ref (user_id, uri_id) 
VALUES
  (
    9998, 9985
  )
;
DROP TABLE IF EXISTS basic_apikey;
CREATE TABLE basic_apikey(apikey_id INT generated BY DEFAULT AS IDENTITY PRIMARY key, user_id INT, apikey VARCHAR(64) NOT NULL UNIQUE, expired_at TIMESTAMP WITHOUT TIME zone);
INSERT INTO
  basic_apikey(user_id, apikey, expired_at) 
VALUES
  (
    9999, 'adminApiKey001', now() + INTERVAL '2 year'
  )
;
INSERT INTO
  basic_apikey(user_id, apikey, expired_at) 
VALUES
  (
    9999, 'adminApiKey002', now() + INTERVAL '2 year'
  )
;
INSERT INTO
  basic_apikey(user_id, apikey, expired_at) 
VALUES
  (
    9998, 'elsaApiKey101', now() + INTERVAL '2 year'
  )
;
INSERT INTO
  basic_apikey(user_id, apikey, expired_at) 
VALUES
  (
    9998, 'elsaApiKey102', now() + INTERVAL '2 year'
  )
;